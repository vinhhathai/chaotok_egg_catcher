import{j as a,B as l,C as R,I as S,H as O,T as h,G as v,a as D,b as M,c as z,d as A,e as E,P as F,f as I,A as q,D as N,g as L,h as P,i as W,k as H,l as _}from"./mui-C3RPuMO8.js";import{c as U,r as f,u as j,e as $,B as Y,f as K,h as T,N as X,a as J}from"./vendor-5gu7uDH6.js";import{p as d}from"./phaser-C6LuCbLG.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var w={},k=U;w.createRoot=k.createRoot,w.hydrateRoot=k.hydrateRoot;class Q extends d.Scene{constructor(){super("StartScene")}preload(){this.load.svg("background","/assets/egg-catch/backgrounds/farm-scene.svg",{scale:1})}create(){const{width:e,height:t}=this.cameras.main;this.add.image(e/2,t/2,"background").setDisplaySize(e,t),this.add.text(e/2,80,"ðŸ¥š Egg Catch",{fontSize:"48px",fill:"#fff",fontStyle:"bold",stroke:"#000",strokeThickness:6}).setOrigin(.5),this.add.text(e/2,170,`Di chuyá»ƒn chuá»™t/ngÃ³n tay
Ä‘á»ƒ báº¯t trá»©ng rÆ¡i!`,{fontSize:"20px",fill:"#fff",stroke:"#000",strokeThickness:3,align:"center"}).setOrigin(.5);const i=this.add.text(e/2,260,"ðŸ‘† Nháº¥n Ä‘á»ƒ báº¯t Ä‘áº§u",{fontSize:"26px",fill:"#ffff00",fontStyle:"bold",stroke:"#000",strokeThickness:4}).setOrigin(.5);this.tweens.add({targets:i,alpha:{from:1,to:.3},duration:800,yoyo:!0,repeat:-1}),this.input.once("pointerdown",()=>{this.startCountdown()})}startCountdown(){const{width:e,height:t}=this.cameras.main;this.children.removeAll(),this.add.image(e/2,t/2,"background").setDisplaySize(e,t);let i=3;const s=this.add.text(e/2,t/2,i.toString(),{fontSize:"100px",fill:"#fff",fontStyle:"bold",stroke:"#ff0000",strokeThickness:8}).setOrigin(.5).setAlpha(0),o=this.time.addEvent({delay:1e3,callback:()=>{i>0?(s.setText(i.toString()),s.setAlpha(0),this.tweens.add({targets:s,alpha:{from:0,to:1},scale:{from:2,to:1},duration:300,ease:"Back.easeOut"}),this.playBeep(i===1?800:600),i--):(s.setText("GO!"),s.setFill("#00ff00"),s.setStroke("#000",10),s.setAlpha(0),this.tweens.add({targets:s,alpha:{from:0,to:1},scale:{from:2,to:1.5},duration:300,ease:"Back.easeOut",onComplete:()=>{this.playBeep(1e3),this.time.delayedCall(500,()=>{this.scene.start("GameScene")})}}),o.remove())},loop:!0})}playBeep(e){try{const t=new(window.AudioContext||window.webkitAudioContext),i=t.createOscillator(),s=t.createGain();i.connect(s),s.connect(t.destination),i.frequency.value=e,s.gain.setValueAtTime(.3,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),i.type="square",i.start(t.currentTime),i.stop(t.currentTime+.2)}catch{console.warn("Audio not available")}}}class Z{constructor(){this.audioContext=null,this.masterVolume=.3,this.initialized=!1,this.init()}init(){try{const e=window.AudioContext||window.webkitAudioContext;e?(this.audioContext=new e,this.initialized=!0):console.warn("âš ï¸ Web Audio API not supported")}catch(e){console.error("âŒ Failed to initialize SoundGenerator:",e)}}resume(){this.audioContext&&this.audioContext.state==="suspended"?this.audioContext.resume().then(()=>{}):this.audioContext}playCatchEgg(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.frequency.setValueAtTime(800,e),t.frequency.exponentialRampToValueAtTime(200,e+.1),i.gain.setValueAtTime(this.masterVolume*.4,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),t.type="sine",t.start(e),t.stop(e+.15)}playCatchGoldenEgg(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime;[523.25,659.25,783.99].forEach((t,i)=>{const s=this.audioContext.createOscillator(),o=this.audioContext.createGain();s.connect(o),o.connect(this.audioContext.destination),s.frequency.value=t,o.gain.setValueAtTime(this.masterVolume*.2,e+i*.05),o.gain.exponentialRampToValueAtTime(.01,e+.4+i*.05),s.type="sine",s.start(e+i*.05),s.stop(e+.4+i*.05)})}playMissEgg(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(100,e+.2),i.gain.setValueAtTime(this.masterVolume*.3,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),t.type="sawtooth",t.start(e),t.stop(e+.25)}playHitBomb(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime,t=this.audioContext.sampleRate*.3,i=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),s=i.getChannelData(0);for(let c=0;c<t;c++)s[c]=Math.random()*2-1;const o=this.audioContext.createBufferSource();o.buffer=i;const n=this.audioContext.createBiquadFilter();n.type="lowpass",n.frequency.setValueAtTime(2e3,e),n.frequency.exponentialRampToValueAtTime(50,e+.2);const u=this.audioContext.createGain();u.gain.setValueAtTime(this.masterVolume*.5,e),u.gain.exponentialRampToValueAtTime(.01,e+.3),o.connect(n),n.connect(u),u.connect(this.audioContext.destination),o.start(e),o.stop(e+.3)}playCombo(e){if(!this.audioContext)return;this.resume();const t=this.audioContext.currentTime,i=440+e*20,s=this.audioContext.createOscillator(),o=this.audioContext.createGain();s.connect(o),o.connect(this.audioContext.destination),s.frequency.setValueAtTime(i,t),s.frequency.exponentialRampToValueAtTime(i*1.5,t+.1),o.gain.setValueAtTime(this.masterVolume*.3,t),o.gain.exponentialRampToValueAtTime(.01,t+.2),s.type="triangle",s.start(t),s.stop(t+.2)}playLevelUp(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime;[523.25,587.33,659.25,783.99].forEach((i,s)=>{const o=this.audioContext.createOscillator(),n=this.audioContext.createGain();o.connect(n),n.connect(this.audioContext.destination),o.frequency.value=i,n.gain.setValueAtTime(this.masterVolume*.25,e+s*.1),n.gain.exponentialRampToValueAtTime(.01,e+.3+s*.1),o.type="square",o.start(e+s*.1),o.stop(e+.3+s*.1)})}playGameOver(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime;[392,349.23,329.63,293.66].forEach((i,s)=>{const o=this.audioContext.createOscillator(),n=this.audioContext.createGain();o.connect(n),n.connect(this.audioContext.destination),o.frequency.value=i,n.gain.setValueAtTime(this.masterVolume*.3,e+s*.2),n.gain.exponentialRampToValueAtTime(.01,e+.4+s*.2),o.type="sawtooth",o.start(e+s*.2),o.stop(e+.4+s*.2)})}playVictory(){if(!this.audioContext)return;this.resume();const e=this.audioContext.currentTime;[523.25,659.25,783.99,1046.5].forEach((i,s)=>{const o=this.audioContext.createOscillator(),n=this.audioContext.createGain();o.connect(n),n.connect(this.audioContext.destination),o.frequency.value=i,n.gain.setValueAtTime(this.masterVolume*.3,e+s*.08),n.gain.exponentialRampToValueAtTime(.01,e+.5+s*.08),o.type="sine",o.start(e+s*.08),o.stop(e+.5+s*.08)})}playBackgroundMusic(){if(!this.audioContext)return;this.resume();const e=[{freq:523.25,duration:.3},{freq:587.33,duration:.3},{freq:659.25,duration:.3},{freq:523.25,duration:.3},{freq:659.25,duration:.3},{freq:587.33,duration:.6}];let t=this.audioContext.currentTime;e.forEach(i=>{const s=this.audioContext.createOscillator(),o=this.audioContext.createGain();s.connect(o),o.connect(this.audioContext.destination),s.frequency.value=i.freq,o.gain.setValueAtTime(this.masterVolume*.1,t),o.gain.exponentialRampToValueAtTime(.01,t+i.duration),s.type="sine",s.start(t),s.stop(t+i.duration),t+=i.duration})}setVolume(e){this.masterVolume=Math.max(0,Math.min(1,e))}playTestSound(){if(!this.audioContext){console.error("âŒ Audio context not initialized");return}this.resume();const e=this.audioContext.currentTime,t=this.audioContext.createOscillator(),i=this.audioContext.createGain();t.connect(i),i.connect(this.audioContext.destination),t.frequency.value=440,i.gain.setValueAtTime(this.masterVolume*.3,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),t.type="sine",t.start(e),t.stop(e+.5)}}const m=new Z;class ee extends d.Scene{constructor(){super("GameScene"),this.score=0,this.gameTime=60,this.lives=3,this.startTime=null,this.combo=0,this.maxCombo=0,this.difficulty=1,this.goldEggChance=.1}preload(){this.load.on("progress",e=>{}),this.load.on("filecomplete",e=>{}),this.load.on("loaderror",e=>{console.error("Error loading:",e.key,e.src)}),this.load.svg("background","/assets/egg-catch/backgrounds/farm-scene.svg",{scale:1}),this.load.svg("egg","/assets/egg-catch/sprites/egg.svg",{width:40,height:50}),this.load.svg("goldEgg","/assets/egg-catch/sprites/golden-egg.svg",{width:40,height:50}),this.load.svg("basket","/assets/egg-catch/sprites/basket.svg",{width:100,height:50}),this.load.svg("bomb","/assets/egg-catch/sprites/bomb.svg",{width:50,height:50}),this.load.svg("heart","/assets/egg-catch/ui/heart-icon.svg",{width:40,height:40}),this.load.svg("coin","/assets/egg-catch/ui/coin-icon.svg",{width:30,height:30}),this.load.svg("star","/assets/egg-catch/ui/star-icon.svg",{width:35,height:35})}create(){this.startTime=Date.now();const{width:e,height:t}=this.cameras.main;m.resume(),setTimeout(()=>{m.playTestSound()},500);const i=this.add.image(e/2,t/2,"background");if(i.texture.key==="__MISSING"){console.error("âŒ Background not loaded! Creating fallback...");const s=this.add.graphics();s.fillGradientStyle(8900331,8900331,9498256,9498256,1),s.fillRect(0,0,e,t)}else i.setDisplaySize(e,t);this.basket=this.physics.add.sprite(e/2,t-50,"basket").setCollideWorldBounds(!0).setScale(.5),this.input.on("pointermove",s=>{this.basket.x=s.x}),this.input.on("pointerdown",s=>{this.basket.x=s.x}),this.eggs=this.physics.add.group(),this.bombs=this.physics.add.group(),this.eggTimer=this.time.addEvent({delay:1e3,callback:this.spawnEgg,callbackScope:this,loop:!0}),this.bombTimer=this.time.addEvent({delay:4e3,callback:this.spawnBomb,callbackScope:this,loop:!0}),this.difficultyTimer=this.time.addEvent({delay:1e4,callback:this.increaseDifficulty,callbackScope:this,loop:!0}),this.physics.add.overlap(this.basket,this.eggs,this.catchEgg,null,this),this.physics.add.overlap(this.basket,this.bombs,this.hitBomb,null,this),this.scoreText=this.add.text(50,16,"0",{fontSize:"24px",fill:"#fff",stroke:"#000",strokeThickness:3,fontStyle:"bold"}).setScrollFactor(0),this.add.image(22,28,"star").setScrollFactor(0).setScale(.5),this.timerText=this.add.text(350,16,"60",{fontSize:"24px",fill:"#fff",stroke:"#000",strokeThickness:3,fontStyle:"bold"}).setOrigin(.5,0).setScrollFactor(0),this.livesText=this.add.text(650,28,"",{fontSize:"24px",fill:"#fff",stroke:"#000",strokeThickness:3,fontStyle:"bold"}).setOrigin(0,.5).setScrollFactor(0),this.heartIcons=[];for(let s=0;s<3;s++){const o=this.add.image(580+s*30,28,"heart").setScrollFactor(0).setScale(.6);this.heartIcons.push(o)}this.comboText=this.add.text(e/2,t-40,"",{fontSize:"20px",fill:"#ffff00",stroke:"#000",strokeThickness:3,fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setAlpha(0),this.gameTimer=this.time.addEvent({delay:1e3,callback:this.updateTimer,callbackScope:this,loop:!0})}update(){if(!this.eggs||!this.bombs||!this.cameras||!this.cameras.main)return;const{height:e}=this.cameras.main;this.eggs.children.entries.forEach(t=>{t&&t.active&&t.y>e&&!t.getData("caught")&&this.missEgg(t)}),this.bombs.children.entries.forEach(t=>{t&&t.active&&t.y>e&&t.destroy()})}spawnEgg(){if(!this.scene.isActive("GameScene"))return;const{width:e}=this.cameras.main,t=d.Math.Between(50,e-50),i=Math.random()<this.goldEggChance,s=i?"goldEgg":"egg",o=this.eggs.create(t,0,s);if(o.texture.key==="__MISSING"){console.error("âŒ Egg texture missing:",s),o.destroy();const n=this.add.graphics();n.fillStyle(i?16766720:16777215,1),n.fillCircle(0,0,20),n.generateTexture("fallback-egg",40,40),n.destroy();const u=this.eggs.create(t,0,"fallback-egg");this.setupEgg(u,i)}else this.setupEgg(o,i)}setupEgg(e,t){const i=150+this.difficulty*20;e.setVelocity(0,d.Math.Between(i,i+100)),e.setData("isGolden",t),e.setData("points",t?50:10),e.setData("caught",!1)}spawnBomb(){if(!this.scene.isActive("GameScene")||this.gameTime<10)return;const{width:e}=this.cameras.main,t=d.Math.Between(50,e-50),i=this.bombs.create(t,0,"bomb"),s=200+this.difficulty*30;i.setVelocity(0,d.Math.Between(s,s+100))}catchEgg(e,t){if(!t.active||t.getData("caught"))return;const i=t.getData("points"),s=t.getData("isGolden");t.setData("caught",!0),t.destroy(),this.score+=i,this.combo++,this.combo>this.maxCombo&&(this.maxCombo=this.combo),this.scoreText.setText(this.score.toString()),s?m.playCatchGoldenEgg():m.playCatchEgg(),this.combo>=3&&(m.playCombo(this.combo),this.comboText.setText(`COMBO x${this.combo}!`),this.comboText.setAlpha(1),this.tweens.add({targets:this.comboText,alpha:0,duration:1e3,ease:"Power2"})),this.tweens.add({targets:this.basket,scaleX:.9,scaleY:.9,duration:100,yoyo:!0}),s?this.createParticles(e.x,e.y,16766720):this.createParticles(e.x,e.y,16777215)}createParticles(e,t,i){for(let s=0;s<10;s++){const o=this.add.circle(e,t,3,i);this.tweens.add({targets:o,x:e+d.Math.Between(-50,50),y:t+d.Math.Between(-50,50),alpha:0,duration:500,onComplete:()=>o.destroy()})}}missEgg(e){!e.active||e.getData("caught")||(e.destroy(),this.combo=0,this.lives--,this.lives>=0&&this.lives<3&&this.heartIcons[this.lives].setAlpha(.2),m.playMissEgg(),this.lives<=0&&this.gameOver())}hitBomb(e,t){t.destroy(),this.combo=0,this.lives--,this.lives>=0&&this.lives<3&&this.heartIcons[this.lives].setAlpha(.2),m.playHitBomb(),this.lives<=0&&this.gameOver()}increaseDifficulty(){this.difficulty++,m.playLevelUp(),this.eggTimer.delay>500&&(this.eggTimer.delay-=50),this.bombTimer.delay>2e3&&(this.bombTimer.delay-=200),this.goldEggChance<.3&&(this.goldEggChance+=.02);const{width:e,height:t}=this.cameras.main,i=this.add.text(e/2,t/2,`LEVEL ${this.difficulty}!`,{fontSize:"42px",fill:"#ff0",stroke:"#000",strokeThickness:5,fontStyle:"bold"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:i,alpha:{from:0,to:1},y:{from:t/2,to:t/2-50},scale:{from:.5,to:1.2},duration:500,yoyo:!0,onComplete:()=>i.destroy()})}updateTimer(){this.gameTime--,this.timerText.setText(this.gameTime.toString()),this.gameTime<=10&&(this.timerText.setFill("#ff0000"),this.tweens.add({targets:this.timerText,scale:{from:1,to:1.2},duration:100,yoyo:!0})),this.gameTime<=0&&this.gameOver()}gameOver(){this.gameTimer&&this.gameTimer.remove(),this.eggTimer&&this.eggTimer.remove(),this.bombTimer&&this.bombTimer.remove(),this.difficultyTimer&&this.difficultyTimer.remove(),this.score>=500?m.playVictory():m.playGameOver();const e=Math.floor((Date.now()-this.startTime)/1e3);this.game.events.emit("gameover",this.score,e)}}function te({onGameOver:r}){const e=f.useRef(null),t=f.useRef(null);return f.useEffect(()=>{if(t.current)return;const i=()=>{m.resume()};document.addEventListener("click",i,{once:!0}),document.addEventListener("touchstart",i,{once:!0});const s=()=>{const x=Math.min(window.innerWidth-40,900),p=Math.min(window.innerHeight-200,600),C=7/5;let y=x,g=y/C;return g>p&&(g=p,y=g*C),{width:Math.floor(y),height:Math.floor(g)}},{width:o,height:n}=s(),u={type:d.AUTO,parent:e.current,width:o,height:n,backgroundColor:"#87CEEB",scale:{mode:d.Scale.FIT,autoCenter:d.Scale.CENTER_BOTH,width:o,height:n},physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[Q,ee]},c=new d.Game(u);t.current=c,c.events.on("gameover",(x,p)=>{r&&r(x,p,{timestamp:Date.now()})});const b=()=>{const x=s();c&&c.scale&&c.scale.resize(x.width,x.height)};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),t.current&&(t.current.destroy(!0),t.current=null)}},[r]),a.jsx("div",{ref:e,style:{width:"100%",maxWidth:"900px",height:"auto",aspectRatio:"7 / 5",maxHeight:"600px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderRadius:"8px",overflow:"hidden",margin:"0 auto"}})}const G=[{id:"egg-catch",name:"Egg Catch",description:"Catch falling eggs and earn coins!",icon:"ðŸ¥š",thumbnail:"/assets/games/egg-catch/thumbnail.png",difficulty:"easy",enabled:!0,component:te}];function se(r){return G.find(e=>e.id===r)}function ie(){return G.filter(r=>r.enabled)}function oe(){const r=j(),[e,t]=f.useState([]),i=document.referrer?new URL(document.referrer).origin:window.location.origin.replace(":4000",":3004");f.useEffect(()=>{t(ie())},[]);const s=n=>({easy:"#4caf50",medium:"#ff9800",hard:"#f44336"})[n]||"#999",o=()=>{window.parent.postMessage({type:"NAVIGATE_HOME"},"*"),window.parent===window&&(window.location.href=`${i}/home`)};return a.jsx(l,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #4ECDC4 0%, #3AB0A8 100%)",py:{xs:2,sm:3,md:4},px:{xs:1,sm:2}},children:a.jsxs(R,{maxWidth:"lg",children:[a.jsxs(l,{sx:{textAlign:"center",mb:4,position:"relative"},children:[a.jsx(S,{onClick:o,sx:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"#fff","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:a.jsx(O,{})}),a.jsxs(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:{xs:1,sm:2},mb:1},children:[a.jsx("img",{src:`${i}/logo.webp`,alt:"Chaotok Logo",style:{width:window.innerWidth<600?"40px":"60px",height:window.innerWidth<600?"40px":"60px",filter:"drop-shadow(2px 2px 4px rgba(0,0,0,0.3))"}}),a.jsx(h,{variant:"h3",sx:{color:"#fff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"1.75rem",sm:"2.5rem",md:"3rem"}},children:"Chaotok Games"})]}),a.jsx(h,{variant:"subtitle1",sx:{color:"rgba(255, 255, 255, 0.9)",fontStyle:"italic"},children:"ðŸŽ® Play & Have Fun!"})]}),a.jsx(v,{container:!0,spacing:{xs:2,sm:3},children:e.map(n=>a.jsx(v,{item:!0,xs:12,sm:6,lg:4,children:a.jsxs(D,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(0,0,0,0.3)"}},children:[a.jsx(M,{component:"div",sx:{height:200,background:"linear-gradient(135deg, #4ECDC4 0%, #3AB0A8 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"80px"},children:n.icon}),a.jsxs(z,{sx:{flexGrow:1},children:[a.jsx(h,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:n.name}),a.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:n.description}),a.jsx(l,{sx:{display:"flex",gap:1,mb:2},children:a.jsx(A,{label:n.difficulty,size:"small",sx:{background:s(n.difficulty),color:"#fff",textTransform:"capitalize"}})}),a.jsx(E,{variant:"contained",startIcon:a.jsx(F,{}),fullWidth:!0,onClick:()=>r(`/game/${n.id}`),sx:{background:"linear-gradient(45deg, #4ECDC4 0%, #3AB0A8 100%)","&:hover":{background:"linear-gradient(45deg, #3AB0A8 0%, #2E9B94 100%)"}},children:"Play"})]})]})},n.id))}),e.length===0&&a.jsx(l,{sx:{textAlign:"center",py:8},children:a.jsx(h,{variant:"h5",sx:{color:"#fff",opacity:.8},children:"More games coming soon! ðŸŽ®"})})]})})}function ae(){const{gameId:r}=$(),e=j(),[t,i]=f.useState(null),[s,o]=f.useState(null),[n,u]=f.useState(!0),[c,b]=f.useState({open:!1,score:0,playTime:0}),x=document.referrer?new URL(document.referrer).origin:window.location.origin.replace(":4000",":3004");f.useEffect(()=>{p()},[r]);const p=async()=>{const g=se(r);if(!g){console.error("Game not found:",r),e("/games");return}i(g),o(()=>g.component),u(!1)},C=async(g,B,V)=>{b({open:!0,score:g,playTime:B,gameplayData:V})},y=()=>{b({...c,open:!1})};return n?a.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #4ECDC4 0%, #3AB0A8 100%)"},children:a.jsx(I,{size:60,sx:{color:"#fff"}})}):!t||!s?a.jsx(l,{sx:{p:3,textAlign:"center"},children:a.jsx(h,{variant:"h5",children:"Game not found"})}):a.jsxs(l,{sx:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #4ECDC4 0%, #3AB0A8 100%)",display:"flex",flexDirection:"column"},children:[a.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,background:"rgba(0,0,0,0.3)",backdropFilter:"blur(10px)"},children:[a.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[a.jsx(S,{onClick:()=>e("/games"),sx:{color:"#fff"},children:a.jsx(q,{})}),a.jsxs(h,{variant:"h6",sx:{color:"#fff",fontWeight:"bold"},children:[t.icon," ",t.name]}),a.jsx(A,{label:t.difficulty,size:"small",sx:{background:"rgba(255,255,255,0.2)",color:"#fff",textTransform:"capitalize"}})]}),a.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx("img",{src:`${x}/logo.webp`,alt:"Chaotok",style:{width:"32px",height:"32px",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}),a.jsx(h,{variant:"body2",sx:{color:"#fff",fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"Chaotok"})]})]}),a.jsx(l,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",p:{xs:1,sm:2,md:3},overflow:"auto"},children:a.jsx(s,{onGameOver:C})}),a.jsxs(N,{open:c.open,onClose:y,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"16px",background:"linear-gradient(135deg, #4ECDC4 0%, #3AB0A8 100%)",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,0.4)"}},children:[a.jsxs(L,{sx:{textAlign:"center",py:4},children:[a.jsx(h,{variant:"h4",sx:{mb:3,fontWeight:"bold"},children:"ðŸŽ® Game Over!"}),a.jsxs(l,{sx:{mb:3,p:3,background:"rgba(255,255,255,0.1)",borderRadius:"12px"},children:[a.jsx(h,{variant:"h3",sx:{mb:2,color:"#ffd700",fontWeight:"bold"},children:c.score}),a.jsx(h,{variant:"h6",sx:{color:"#fff",opacity:.9},children:"Your Score"}),c.playTime&&a.jsxs(h,{variant:"body1",sx:{mt:2,color:"#fff",opacity:.7},children:["Time: ",Math.floor(c.playTime/60),":",(c.playTime%60).toString().padStart(2,"0")]})]})]}),a.jsx(P,{sx:{justifyContent:"center",pb:3},children:a.jsx(E,{onClick:y,variant:"contained",sx:{px:4,py:1.5,borderRadius:"25px",background:"linear-gradient(45deg, #ffd700, #ffed4e)",color:"#000",fontWeight:"bold",fontSize:"16px",textTransform:"none","&:hover":{background:"linear-gradient(45deg, #ffed4e, #ffd700)",transform:"scale(1.05)"},transition:"all 0.3s ease"},children:"OK"})})]})]})}const ne=W({palette:{mode:"light",primary:{main:"#4ECDC4"},secondary:{main:"#3AB0A8"}},typography:{fontFamily:'"Segoe UI", "Roboto", "Arial", sans-serif'}});function re(){return a.jsxs(H,{theme:ne,children:[a.jsx(_,{}),a.jsx(Y,{children:a.jsxs(K,{children:[a.jsx(T,{path:"/",element:a.jsx(X,{to:"/games",replace:!0})}),a.jsx(T,{path:"/games",element:a.jsx(oe,{})}),a.jsx(T,{path:"/game/:gameId",element:a.jsx(ae,{})})]})})]})}const ce=w.createRoot(document.getElementById("root"));ce.render(a.jsx(J.StrictMode,{children:a.jsx(re,{})}));
